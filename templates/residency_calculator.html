{% extends 'base.html' %}

{% block content %}
<div class="calculator-container">
    <h1>Residency Investment Calculator</h1>
    <p class="subtitle">Estimate your investment returns and timeline</p>

    <div class="calculator-grid">
        <section class="calculator-section">
            <h3>ROI Calculator</h3>
            <form id="roiForm">
                <div class="form-group">
                    <label>Initial Investment ($)</label>
                    <input type="number" id="investment" placeholder="500000" min="0" step="1000">
                </div>
                <div class="form-group">
                    <label>Expected Annual Return (%)</label>
                    <input type="number" id="annualReturn" placeholder="5" min="0" max="100" step="0.5">
                </div>
                <div class="form-group">
                    <label>Investment Period (Years)</label>
                    <input type="number" id="years" placeholder="5" min="1" max="50">
                </div>
                <button type="button" onclick="calculateROI()" class="btn btn-primary">Calculate</button>
            </form>

            <div id="roiResults" style="display: none;">
                <div class="result-card">
                    <h4>Initial Investment</h4>
                    <p id="resultInvestment" class="result-value">$0</p>
                </div>
                <div class="result-card">
                    <h4>Final Value</h4>
                    <p id="resultFinal" class="result-value">$0</p>
                </div>
                <div class="result-card">
                    <h4>Total Profit</h4>
                    <p id="resultProfit" class="result-value" style="color: #4caf50;">$0</p>
                </div>
            </div>
        </section>

        <section class="calculator-section">
            <h3>Cost Breakdown</h3>
            <form id="costForm">
                <div class="form-group">
                    <label>Investment Amount ($)</label>
                    <input type="number" id="costInvestment" placeholder="500000" min="0" step="1000">
                </div>
                <div class="form-group">
                    <label>Application Fees ($)</label>
                    <input type="number" id="appFees" placeholder="5000" min="0" step="100">
                </div>
                <div class="form-group">
                    <label>Legal Fees ($)</label>
                    <input type="number" id="legalFees" placeholder="3000" min="0" step="100">
                </div>
                <div class="form-group">
                    <label>Processing Fees ($)</label>
                    <input type="number" id="processingFees" placeholder="1000" min="0" step="100">
                </div>
                <button type="button" onclick="calculateCosts()" class="btn btn-primary">Calculate</button>
            </form>

            <div id="costResults" style="display: none;">
                <div class="cost-breakdown">
                    <div class="cost-row">
                        <span>Investment:</span>
                        <span id="costResultInvestment">$0</span>
                    </div>
                    <div class="cost-row">
                        <span>Application Fees:</span>
                        <span id="costResultApp">$0</span>
                    </div>
                    <div class="cost-row">
                        <span>Legal Fees:</span>
                        <span id="costResultLegal">$0</span>
                    </div>
                    <div class="cost-row">
                        <span>Processing Fees:</span>
                        <span id="costResultProcessing">$0</span>
                    </div>
                    <div class="cost-row total">
                        <span>Total Cost:</span>
                        <span id="costResultTotal">$0</span>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <section class="timeline-section">
        <h3>Investment Timeline Estimator</h3>
        <div class="timeline">
            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <h4>Preparation Phase</h4>
                <p>2-4 weeks</p>
                <span class="description">Document gathering and consultation</span>
            </div>
            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <h4>Application Submission</h4>
                <p>1-2 weeks</p>
                <span class="description">Formal application filing</span>
            </div>
            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <h4>Processing</h4>
                <p>2-6 months</p>
                <span class="description">Government review and processing</span>
            </div>
            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <h4>Approval & Permit</h4>
                <p>1-2 weeks</p>
                <span class="description">Residency permit issuance</span>
            </div>
        </div>
    </section>
</div>

<style>
.calculator-container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
}

.calculator-container h1 {
    text-align: center;
    color: #333;
    margin-bottom: 10px;
}

.subtitle {
    text-align: center;
    color: #666;
    margin-bottom: 30px;
}

.calculator-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 30px;
    margin-bottom: 40px;
}

.calculator-section {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.calculator-section h3 {
    color: #333;
    margin-top: 0;
    margin-bottom: 20px;
    border-bottom: 2px solid #667eea;
    padding-bottom: 10px;
}

.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    color: #333;
    font-weight: 600;
    font-size: 14px;
}

.form-group input {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 14px;
}

.form-group input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 5px rgba(102, 126, 234, 0.3);
}

.btn {
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
}

.btn-primary {
    background: linear-gradient(90deg, #667eea, #764ba2);
    color: white;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.result-card {
    background: #f5f5f5;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 12px;
    border-left: 4px solid #667eea;
}

.result-card h4 {
    margin: 0 0 8px 0;
    color: #333;
    font-size: 13px;
    text-transform: uppercase;
}

.result-value {
    margin: 0;
    font-size: 24px;
    font-weight: bold;
    color: #667eea;
}

.cost-breakdown {
    background: #f5f5f5;
    border-radius: 8px;
    padding: 15px;
}

.cost-row {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid #ddd;
    color: #333;
}

.cost-row:last-child {
    border-bottom: none;
}

.cost-row.total {
    font-weight: bold;
    font-size: 16px;
    color: #667eea;
}

.timeline-section {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.timeline-section h3 {
    color: #333;
    margin-top: 0;
    margin-bottom: 30px;
}

.timeline {
    display: flex;
    justify-content: space-between;
    position: relative;
}

.timeline::before {
    content: '';
    position: absolute;
    top: 30px;
    left: 0;
    right: 0;
    height: 2px;
    background: #ddd;
    z-index: 0;
}

.timeline-item {
    flex: 1;
    text-align: center;
    position: relative;
    z-index: 1;
}

.timeline-dot {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 50%;
    margin: 0 auto 15px;
    border: 4px solid white;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.timeline-item h4 {
    margin: 15px 0 5px 0;
    color: #333;
}

.timeline-item p {
    margin: 0 0 8px 0;
    color: #667eea;
    font-weight: 600;
}

.description {
    display: block;
    font-size: 13px;
    color: #666;
}
</style>

<script>
function calculateROI() {
    const investment = parseFloat(document.getElementById('investment').value) || 0;
    const annualReturn = parseFloat(document.getElementById('annualReturn').value) || 0;
    const years = parseInt(document.getElementById('years').value) || 0;

    if (investment && annualReturn && years) {
        const finalValue = investment * Math.pow(1 + annualReturn/100, years);
        const profit = finalValue - investment;

        document.getElementById('resultInvestment').textContent = '$' + investment.toLocaleString();
        document.getElementById('resultFinal').textContent = '$' + Math.round(finalValue).toLocaleString();
        document.getElementById('resultProfit').textContent = '$' + Math.round(profit).toLocaleString();
        document.getElementById('roiResults').style.display = 'block';
    }
}

function calculateCosts() {
    const investment = parseFloat(document.getElementById('costInvestment').value) || 0;
    const appFees = parseFloat(document.getElementById('appFees').value) || 0;
    const legalFees = parseFloat(document.getElementById('legalFees').value) || 0;
    const processingFees = parseFloat(document.getElementById('processingFees').value) || 0;
    const total = investment + appFees + legalFees + processingFees;

    document.getElementById('costResultInvestment').textContent = '$' + investment.toLocaleString();
    document.getElementById('costResultApp').textContent = '$' + appFees.toLocaleString();
    document.getElementById('costResultLegal').textContent = '$' + legalFees.toLocaleString();
    document.getElementById('costResultProcessing').textContent = '$' + processingFees.toLocaleString();
    document.getElementById('costResultTotal').textContent = '$' + total.toLocaleString();
    document.getElementById('costResults').style.display = 'block';
}
</script>
{% endblock %}
