{% extends 'base.html' %}

{% block content %}
<div class="residencies-container">
    <!-- Update Notice -->
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px 20px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-weight: 500;">
        üìä <strong>Data Updated Weekly:</strong> Our residency program information is updated every 7 days to ensure you have the latest requirements, fees, and processing times.
    </div>

    <section class="residencies-hero">
        <h1>Explore Global Residency Programs</h1>
        <p>Discover investment and citizenship opportunities worldwide</p>
        
        <div class="residencies-search">
            <input type="text" id="countrySearch" placeholder="Search countries..." class="search-input">
            <select id="typeFilter" class="filter-select">
                <option value="">All Types</option>
                <option value="Investment">Investment</option>
                <option value="Employment">Employment</option>
                <option value="Skilled Migration">Skilled Migration</option>
                <option value="Retirement">Retirement</option>
            </select>
        </div>
    </section>

    <section class="residencies-grid">
        <div class="countries-grid">
            {% for country in countries %}
            <div class="country-card residency-card" data-country="{{ country }}">
                <div class="card-header">
                    <h3>{{ country }}</h3>
                    <span class="flag">üåç</span>
                </div>
                <div class="card-body">
                    <p class="country-description">Explore residency and investment opportunities</p>
                    <a href="{{ url_for('residency_country', country=country) }}" class="btn btn-primary">View Programs</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>

    <section class="quick-tools">
        <h2>Quick Tools</h2>
        <div class="tools-grid">
            <div class="tool-card">
                <h4>Eligibility Checker</h4>
                <p>Find programs you're eligible for</p>
                <a href="{{ url_for('residency_eligibility') }}" class="btn btn-secondary">Check Now</a>
            </div>
            <div class="tool-card">
                <h4>ROI Calculator</h4>
                <p>Calculate investment returns</p>
                <a href="{{ url_for('residency_calculator') }}" class="btn btn-secondary">Calculate</a>
            </div>
            <div class="tool-card">
                <h4>Program Comparison</h4>
                <p>Compare multiple programs side-by-side</p>
                <a href="{{ url_for('residency_comparison') }}" class="btn btn-secondary">Compare</a>
            </div>
            <div class="tool-card">
                <h4>Find Consultants</h4>
                <p>Connect with verified experts</p>
                <a href="{{ url_for('consultants') }}" class="btn btn-secondary">Browse</a>
            </div>
        </div>
    </section>

    <section class="featured-programs">
        <h2>Featured Programs</h2>
        <div class="featured-grid">
            <div class="featured-card">
                <h4>Portugal Golden Visa</h4>
                <p>Invest from ‚Ç¨280,000 for EU residency</p>
                <span class="popular-badge">Popular</span>
            </div>
            <div class="featured-card">
                <h4>Malta Residency</h4>
                <p>EU living from ‚Ç¨12,000/year rental</p>
                <span class="popular-badge">Popular</span>
            </div>
            <div class="featured-card">
                <h4>Canada Express Entry</h4>
                <p>Fast-track skilled immigration in 6 months</p>
                <span class="popular-badge">Popular</span>
            </div>
        </div>
    </section>
</div>

<style>
.residencies-hero {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 60px 20px;
    text-align: center;
    border-radius: 10px;
    margin-bottom: 40px;
}

.residencies-hero h1 {
    font-size: 42px;
    margin-bottom: 10px;
}

.residencies-search {
    display: flex;
    gap: 10px;
    max-width: 600px;
    margin: 30px auto 0;
}

.search-input, .filter-select {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 5px;
    font-size: 16px;
}

.residencies-grid {
    margin-bottom: 50px;
}

.countries-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
}

.country-card {
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 10px;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    padding: 20px;
}

.country-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.card-header h3 {
    margin: 0;
    font-size: 22px;
}

.flag {
    font-size: 32px;
}

.quick-tools {
    background: #f5f5f5;
    padding: 40px;
    border-radius: 10px;
    margin: 50px 0;
}

.quick-tools h2 {
    text-align: center;
    margin-bottom: 30px;
}

.tools-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}

.tool-card {
    background: white;
    padding: 20px;
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.featured-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
}

.featured-card {
    background: white;
    padding: 25px;
    border-radius: 10px;
    border-left: 4px solid #667eea;
    position: relative;
}

.popular-badge {
    background: #ff6b6b;
    color: white;
    padding: 4px 8px;
    border-radius: 20px;
    font-size: 12px;
    position: absolute;
    top: 10px;
    right: 10px;
}
</style>

<script>
document.getElementById('countrySearch').addEventListener('input', function(e) {
    const searchTerm = e.target.value.toLowerCase();
    document.querySelectorAll('.country-card').forEach(card => {
        const country = card.getAttribute('data-country').toLowerCase();
        card.style.display = country.includes(searchTerm) ? '' : 'none';
    });
});
</script>
{% endblock %}
