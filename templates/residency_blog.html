{% extends 'base.html' %}

{% block content %}
<div class="blog-container">
    <!-- Update Notice -->
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px 20px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-weight: 500;">
        üìä <strong>Content Updated Weekly:</strong> Our blog and residency guides are updated every 7 days with the latest immigration news and insights.
    </div>
    <div class="blog-header">
        <h1>Residency & Immigration Blog</h1>
        <p>Expert guides, case studies, and insights</p>
    </div>

    <div class="blog-grid">
        {% if posts.items %}
            {% for post in posts.items %}
            <article class="blog-card">
                {% if post.featured_image %}
                <div class="blog-image">
                    <img src="{{ post.featured_image }}" alt="{{ post.title }}">
                </div>
                {% endif %}
                <div class="blog-content">
                    <span class="blog-category">{{ post.category }}</span>
                    <h3><a href="{{ url_for('residency_blog_post', slug=post.slug) }}">{{ post.title }}</a></h3>
                    <p class="blog-excerpt">{{ post.excerpt or post.content[:150] }}...</p>
                    <div class="blog-meta">
                        <span class="author">By {{ post.author }}</span>
                        <span class="views">üëÅÔ∏è {{ post.views }} views</span>
                        <span class="date">{{ post.created_at.strftime('%B %d, %Y') }}</span>
                    </div>
                    <a href="{{ url_for('residency_blog_post', slug=post.slug) }}" class="read-more">Read More ‚Üí</a>
                </div>
            </article>
            {% endfor %}
        {% else %}
        <div class="no-posts">
            <p>No blog posts published yet.</p>
        </div>
        {% endif %}
    </div>

    {% if posts.pages > 1 %}
    <div class="pagination">
        {% if posts.has_prev %}
        <a href="{{ url_for('residency_blog', page=posts.prev_num) }}" class="btn-pagination">‚Üê Previous</a>
        {% endif %}

        {% for page_num in posts.iter_pages() %}
            {% if page_num %}
                {% if page_num == posts.page %}
                <span class="current">{{ page_num }}</span>
                {% else %}
                <a href="{{ url_for('residency_blog', page=page_num) }}">{{ page_num }}</a>
                {% endif %}
            {% endif %}
        {% endfor %}

        {% if posts.has_next %}
        <a href="{{ url_for('residency_blog', page=posts.next_num) }}" class="btn-pagination">Next ‚Üí</a>
        {% endif %}
    </div>
    {% endif %}
</div>

<style>
.blog-container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
}

.blog-header {
    text-align: center;
    margin-bottom: 50px;
}

.blog-header h1 {
    font-size: 36px;
    color: #333;
    margin-bottom: 10px;
}

.blog-header p {
    color: #666;
    font-size: 18px;
}

.blog-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 30px;
    margin-bottom: 50px;
}

.blog-card {
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.blog-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}

.blog-image {
    width: 100%;
    height: 200px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    overflow: hidden;
}

.blog-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.blog-content {
    padding: 20px;
}

.blog-category {
    display: inline-block;
    background: #667eea;
    color: white;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    margin-bottom: 10px;
}

.blog-card h3 {
    margin: 10px 0;
    color: #333;
    font-size: 20px;
}

.blog-card h3 a {
    text-decoration: none;
    color: #333;
    transition: color 0.3s ease;
}

.blog-card h3 a:hover {
    color: #667eea;
}

.blog-excerpt {
    color: #666;
    line-height: 1.6;
    margin: 15px 0;
}

.blog-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin: 15px 0;
    font-size: 13px;
    color: #999;
}

.read-more {
    color: #667eea;
    text-decoration: none;
    font-weight: 600;
    transition: color 0.3s ease;
}

.read-more:hover {
    color: #764ba2;
}

.no-posts {
    text-align: center;
    padding: 60px 20px;
    color: #666;
}

.pagination {
    text-align: center;
    margin-top: 40px;
}

.pagination a,
.pagination span.current {
    padding: 8px 12px;
    margin: 0 4px;
    border: 1px solid #ddd;
    border-radius: 5px;
    text-decoration: none;
    color: #667eea;
    transition: all 0.3s ease;
}

.pagination a:hover {
    background: #667eea;
    color: white;
}

.pagination span.current {
    background: #667eea;
    color: white;
    border-color: #667eea;
}

.btn-pagination {
    padding: 10px 20px;
    font-weight: 600;
}
</style>
{% endblock %}
