{% extends 'base.html' %}

{% block content %}
<div class="program-detail-container">
    <!-- Update Notice -->
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px 20px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-weight: 500;">
        üìä <strong>Data Updated Weekly:</strong> This program information is updated every 7 days with the latest requirements and fees.
    </div>

    <div class="breadcrumb">
        <a href="{{ url_for('residencies') }}">Residencies</a> > 
        <a href="{{ url_for('residency_country', country=country) }}">{{ country }}</a> > 
        <span>{{ program_name }}</span>
    </div>

    <div class="detail-header">
        <div>
            <h1>{{ program_name }}</h1>
            <p class="type-badge">{{ program.residency_type }}</p>
        </div>
        {% if current_user.is_authenticated %}
        <form method="POST" action="{{ url_for('save_program') }}" style="display: inline;">
            <input type="hidden" name="country" value="{{ country }}">
            <input type="hidden" name="program_name" value="{{ program_name }}">
            <button type="submit" class="btn-save {% if saved %}active{% endif %}">
                {% if saved %}‚ù§Ô∏è Saved{% else %}ü§ç Save{% endif %}
            </button>
        </form>
        {% endif %}
    </div>

    <p class="detail-description">{{ program.description }}</p>

    <div class="detail-grid">
        <section class="detail-section">
            <h3>Key Information</h3>
            <div class="info-table">
                <div class="info-row">
                    <span class="label">Processing Time:</span>
                    <span class="value">{{ program.processing_time }}</span>
                </div>
                <div class="info-row">
                    <span class="label">Initial Permit:</span>
                    <span class="value">{{ program.initial_permit_duration }}</span>
                </div>
                <div class="info-row">
                    <span class="label">Path to Citizenship:</span>
                    <span class="value">{{ program.path_to_citizenship }}</span>
                </div>
                <div class="info-row">
                    <span class="label">Visa-Free Countries:</span>
                    <span class="value">{{ program.visa_free_countries }}</span>
                </div>
                <div class="info-row">
                    <span class="label">Family Members Eligible:</span>
                    <span class="value">{% if program.family_members_eligible %}‚úÖ Yes{% else %}‚ùå No{% endif %}</span>
                </div>
            </div>
        </section>

        {% if program.investment_types %}
        <section class="detail-section">
            <h3>Investment Options</h3>
            <div class="investment-options">
                {% for inv_type, inv_data in program.investment_types.items() %}
                <div class="investment-card">
                    <h4>{{ inv_type }}</h4>
                    <div class="investment-amount">{{ inv_data.minimum }}</div>
                    <p>{{ inv_data.description }}</p>
                    <p class="roi"><strong>ROI Potential:</strong> {{ inv_data.roi_potential }}</p>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        {% if program.cost %}
        <section class="detail-section">
            <h3>Associated Costs</h3>
            <div class="cost-breakdown">
                {% for cost_type, amount in program.cost.items() %}
                <div class="cost-item">
                    <span class="cost-label">{{ cost_type | replace('_', ' ') | title }}:</span>
                    <span class="cost-amount">{{ amount }}</span>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}
    </div>

    <div class="requirements-section">
        <h3>Requirements</h3>
        <ul class="requirements-list">
            {% for req in program.requirements %}
            <li>{{ req }}</li>
            {% endfor %}
        </ul>
    </div>

    <div class="documents-section">
        <h3>Documents Required</h3>
        <ul class="documents-list">
            {% for doc in program.documents_required %}
            <li>
                <span class="doc-icon">üìÑ</span>
                {{ doc }}
            </li>
            {% endfor %}
        </ul>
    </div>

    <div class="benefits-section">
        <h3>Benefits</h3>
        <div class="benefits-grid">
            {% for benefit in program.benefits %}
            <div class="benefit-item">
                <span class="check">‚úì</span>
                {{ benefit }}
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="action-section">
        <h3>Ready to Apply?</h3>
        <p>Connect with our verified consultants for personalized guidance.</p>
        <a href="{{ url_for('book_consultation') }}" class="btn btn-large btn-primary">Book a Consultation</a>
        <a href="{{ url_for('residency_calculator') }}" class="btn btn-large btn-secondary">Calculate Investment</a>
    </div>
</div>

<style>
.program-detail-container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
}

.breadcrumb {
    margin-bottom: 30px;
    color: #666;
    font-size: 14px;
}

.breadcrumb a {
    color: #667eea;
    text-decoration: none;
}

.detail-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 20px;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.detail-header h1 {
    margin: 0 0 10px 0;
    font-size: 36px;
    color: #333;
}

.type-badge {
    background: #667eea;
    color: white;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 13px;
    display: inline-block;
    margin: 0;
}

.btn-save {
    padding: 10px 20px;
    background: white;
    border: 2px solid #667eea;
    color: #667eea;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s ease;
}

.btn-save:hover, .btn-save.active {
    background: #667eea;
    color: white;
}

.detail-description {
    font-size: 16px;
    color: #666;
    line-height: 1.8;
    margin-bottom: 30px;
}

.detail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 25px;
    margin-bottom: 40px;
}

.detail-section {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.detail-section h3 {
    color: #333;
    margin-top: 0;
    margin-bottom: 20px;
    border-bottom: 2px solid #667eea;
    padding-bottom: 10px;
}

.info-table {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.info-row {
    display: flex;
    justify-content: space-between;
    padding: 12px;
    background: #f5f5f5;
    border-radius: 5px;
}

.info-row .label {
    font-weight: 600;
    color: #333;
}

.info-row .value {
    color: #667eea;
    font-weight: 600;
}

.investment-options {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.investment-card {
    background: #f5f5f5;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #667eea;
}

.investment-card h4 {
    margin: 0 0 10px 0;
    color: #333;
}

.investment-amount {
    font-size: 22px;
    font-weight: bold;
    color: #667eea;
    margin-bottom: 8px;
}

.investment-card p {
    margin: 5px 0;
    color: #666;
    font-size: 14px;
}

.cost-breakdown {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.cost-item {
    display: flex;
    justify-content: space-between;
    padding: 12px;
    background: #f5f5f5;
    border-radius: 5px;
}

.cost-label {
    font-weight: 600;
    color: #333;
}

.cost-amount {
    color: #667eea;
    font-weight: 600;
}

.requirements-section, .documents-section, .benefits-section {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    margin-bottom: 25px;
}

.requirements-section h3, .documents-section h3, .benefits-section h3 {
    color: #333;
    margin-top: 0;
    border-bottom: 2px solid #667eea;
    padding-bottom: 10px;
}

.requirements-list, .documents-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.requirements-list li, .documents-list li {
    padding: 12px;
    background: #f5f5f5;
    margin-bottom: 10px;
    border-radius: 5px;
    color: #333;
}

.doc-icon {
    margin-right: 10px;
}

.benefits-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
}

.benefit-item {
    display: flex;
    align-items: center;
    padding: 15px;
    background: #e8f4f8;
    border-radius: 8px;
    color: #333;
}

.check {
    color: #4caf50;
    font-weight: bold;
    margin-right: 10px;
    font-size: 18px;
}

.action-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 40px;
    border-radius: 10px;
    text-align: center;
}

.action-section h3 {
    color: white;
    margin-top: 0;
}

.btn-large {
    padding: 12px 30px;
    margin: 10px 5px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
    text-decoration: none;
    display: inline-block;
    transition: all 0.3s ease;
}

.btn-primary {
    background: white;
    color: #667eea;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255,255,255,0.3);
}

.btn-secondary {
    background: transparent;
    color: white;
    border: 2px solid white;
}

.btn-secondary:hover {
    background: white;
    color: #667eea;
}
</style>
{% endblock %}
